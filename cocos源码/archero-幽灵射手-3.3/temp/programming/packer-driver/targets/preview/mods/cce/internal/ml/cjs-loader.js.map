{"version":3,"sources":["cce:/internal/ml/cjs-loader.mjs"],"names":["CjsLoader","_namedWrappers","_resolveCache","_moduleCache","define","id","wrapper","require","_require","createRequireWithReqMap","requireMap","originalRequire","specifier","resolved","Error","throwInvalidWrapper","requestTarget","from","parent","cachedModule","exports","module","_tryModuleLoad","_resolve","_resolveFromInfos","_throwUnresolved","cjsInfos","resolveCache","undefined","threw","_load","_loadWrapper","_createRequire","_loadExternalWrapper","path","URL","fileURLToPath","err","extern","Object","assign","parentUrl"],"mappings":";;;;;;;AAAMA,MAAAA,S;AACF,6BAAc;AACV,eAAKC,cAAL,GAAsB,EAAtB;AACA,eAAKC,aAAL,GAAqB,EAArB;AACA,eAAKC,YAAL,GAAoB,EAApB;AACH;;;;eAEDC,M,GAAA,gBAAOC,EAAP,EAAWC,OAAX,EAAoB;AAChB,eAAKL,cAAL,CAAoBI,EAApB,IAA0BC,OAA1B;AACH,S;;eAEDC,O,GAAA,iBAAQF,EAAR,EAAY;AACR,iBAAO,KAAKG,QAAL,CAAcH,EAAd,CAAP;AACH,S;;eAEDI,uB,GAAA,iCAAwBC,UAAxB,EAAoCC,eAApC,EAAqD;AACjD,iBAAO,UAACC,SAAD,EAAe;AAClB,gBAAMC,QAAQ,GAAGH,UAAU,CAACE,SAAD,CAA3B;;AACA,gBAAIC,QAAJ,EAAc;AACV,qBAAOF,eAAe,CAACE,QAAD,CAAtB;AACH,aAFD,MAEO;AACH,oBAAM,IAAIC,KAAJ,CAAU,0BAA0BF,SAApC,CAAN;AACH;AACJ,WAPD;AAQH,S;;eAEDG,mB,GAAA,6BAAoBC,aAApB,EAAmCC,IAAnC,EAAyC;AACrC,gBAAM,IAAIH,KAAJ,cAAqBE,aAArB,yBAAsDC,IAAtD,qEAAN;AACH,S;;eAEDT,Q,GAAA,kBAASH,EAAT,EAAaa,MAAb,EAAqB;AACjB,cAAMC,YAAY,GAAG,KAAKhB,YAAL,CAAkBE,EAAlB,CAArB;;AACA,cAAIc,YAAJ,EAAkB;AACd,mBAAOA,YAAY,CAACC,OAApB;AACH;;AAED,cAAMC,MAAM,GAAG;AAAEhB,YAAAA,EAAE,EAAFA,EAAF;AAAMe,YAAAA,OAAO,EAAE;AAAf,WAAf;AACA,eAAKjB,YAAL,CAAkBE,EAAlB,IAAwBgB,MAAxB;;AACA,eAAKC,cAAL,CAAoBD,MAApB,EAA4BhB,EAA5B;;AACA,iBAAOgB,MAAM,CAACD,OAAd;AACH,S;;eAEDG,Q,GAAA,kBAASX,SAAT,EAAoBM,MAApB,EAA4B;AACxB,iBAAO,KAAKM,iBAAL,CAAuBZ,SAAvB,EAAkCM,MAAlC,KAA6C,KAAKO,gBAAL,CAAsBb,SAAtB,EAAiCM,MAAjC,CAApD;AACH,S;;eAEDM,iB,GAAA,2BAAkBZ,SAAlB,EAA6BM,MAA7B,EAAqC;AAAA;;AACjC,cAAIN,SAAS,IAAIc,QAAjB,EAA2B;AACvB,mBAAOd,SAAP;AACH;;AACD,cAAI,CAACM,MAAL,EAAa;AACT;AACH;;AACD,8DAAOQ,QAAQ,CAACR,MAAD,CAAf,qDAAO,iBAAkBS,YAAlB,CAA+Bf,SAA/B,CAAP,yEAAoDgB,SAApD;AACH,S;;eAEDN,c,GAAA,wBAAeD,MAAf,EAAuBhB,EAAvB,EAA2B;AACvB,cAAIwB,KAAK,GAAG,IAAZ;;AACA,cAAI;AACA,iBAAKC,KAAL,CAAWT,MAAX,EAAmBhB,EAAnB;;AACAwB,YAAAA,KAAK,GAAG,KAAR;AACH,WAHD,SAGU;AACN,gBAAIA,KAAJ,EAAW;AACP,qBAAO,KAAK1B,YAAL,CAAkBE,EAAlB,CAAP;AACH;AACJ;AACJ,S;;eAEDyB,K,GAAA,eAAMT,MAAN,EAAchB,EAAd,EAAkB;AACd,cAAMC,OAAO,GAAG,KAAKyB,YAAL,CAAkB1B,EAAlB,CAAhB;;AACA,cAAME,OAAO,GAAG,KAAKyB,cAAL,CAAoBX,MAApB,CAAhB;;AACAf,UAAAA,OAAO,CAACe,MAAM,CAACD,OAAR,EAAiBb,OAAjB,EAA0Bc,MAA1B,CAAP;AACH,S;;eAEDU,Y,GAAA,sBAAa1B,EAAb,EAAiB;AACb,cAAIA,EAAE,IAAI,KAAKJ,cAAf,EAA+B;AAC3B,mBAAO,KAAKA,cAAL,CAAoBI,EAApB,CAAP;AACH,WAFD,MAEO;AACH,mBAAO,KAAK4B,oBAAL,CAA0B5B,EAA1B,CAAP;AACH;AACJ,S;;eAED4B,oB,GAAA,8BAAqB5B,EAArB,EAAyB;AACrB,iBAAO,UAACe,OAAD,EAAa;AAChB,gBAAIc,IAAJ;;AACA,gBAAI;AACAA,cAAAA,IAAI,GAAGC,GAAG,CAACC,aAAJ,CAAkB/B,EAAlB,CAAP;AACH,aAFD,CAEE,OAAOgC,GAAP,EAAY;AACV,oBAAM,IAAIvB,KAAJ,CAAaT,EAAb,8BAAN;AACH;;AACD,gBAAMiC,MAAM,GAAG/B,OAAO,CAAC2B,IAAD,CAAtB;;AACAK,YAAAA,MAAM,CAACC,MAAP,CAAcpB,OAAd,EAAuBkB,MAAvB;AACH,WATD;AAUH,S;;eAEDN,c,GAAA,wBAAeX,MAAf,EAAuB;AAAA;;AACnB,iBAAO,UAACT,SAAD;AAAA,mBAAe,KAAI,CAACJ,QAAL,CAAcI,SAAd,EAAyBS,MAAzB,CAAf;AAAA,WAAP;AACH,S;;eAEDI,gB,GAAA,0BAAiBb,SAAjB,EAA4B6B,SAA5B,EAAuC;AACnC,gBAAM,IAAI3B,KAAJ,wBAA+BF,SAA/B,cAAiDM,MAAjD,OAAN;AACH,S;;;;;yBAGU,IAAIlB,SAAJ,E","sourcesContent":["class CjsLoader {\n    constructor() {\n        this._namedWrappers = {};\n        this._resolveCache = {};\n        this._moduleCache = {};\n    }\n\n    define(id, wrapper) {\n        this._namedWrappers[id] = wrapper;\n    }\n\n    require(id) {\n        return this._require(id);\n    }\n\n    createRequireWithReqMap(requireMap, originalRequire) {\n        return (specifier) => {\n            const resolved = requireMap[specifier];\n            if (resolved) {\n                return originalRequire(resolved);\n            } else {\n                throw new Error('Unresolved specifier ' + specifier);\n            }\n        };\n    }\n\n    throwInvalidWrapper(requestTarget, from) {\n        throw new Error(`Module '${requestTarget}' imported from '${from}' is expected be an ESM-wrapped CommonJS module but it doesn't.`);\n    }\n\n    _require(id, parent) {\n        const cachedModule = this._moduleCache[id];\n        if (cachedModule) {\n            return cachedModule.exports;\n        }\n\n        const module = { id, exports: {} };\n        this._moduleCache[id] = module;\n        this._tryModuleLoad(module, id);\n        return module.exports;\n    }\n\n    _resolve(specifier, parent) {\n        return this._resolveFromInfos(specifier, parent) || this._throwUnresolved(specifier, parent);\n    }\n\n    _resolveFromInfos(specifier, parent) {\n        if (specifier in cjsInfos) {\n            return specifier;\n        }\n        if (!parent) {\n            return;\n        }\n        return cjsInfos[parent]?.resolveCache[specifier] ?? undefined;\n    }\n\n    _tryModuleLoad(module, id) {\n        let threw = true;\n        try {\n            this._load(module, id);\n            threw = false;\n        } finally {\n            if (threw) {\n                delete this._moduleCache[id];\n            }\n        }\n    }\n\n    _load(module, id) {\n        const wrapper = this._loadWrapper(id);\n        const require = this._createRequire(module);\n        wrapper(module.exports, require, module);\n    }\n\n    _loadWrapper(id) {\n        if (id in this._namedWrappers) {\n            return this._namedWrappers[id];\n        } else {\n            return this._loadExternalWrapper(id);\n        }\n    }\n\n    _loadExternalWrapper(id) {\n        return (exports) => {\n            let path;\n            try {\n                path = URL.fileURLToPath(id);\n            } catch (err) {\n                throw new Error(`${id} is not a valid file URL`);\n            }\n            const extern = require(path);\n            Object.assign(exports, extern);\n        };\n    }\n\n    _createRequire(module) {\n        return (specifier) => this._require(specifier, module);\n    }\n\n    _throwUnresolved(specifier, parentUrl) {\n        throw new Error(`Unable to resolve ${specifier} from ${parent}.`);\n    }\n}\n\nexport default new CjsLoader();\n"]}