{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/fight/monsterSkill/laser.ts"],"names":["_decorator","Component","poolManager","EffectManager","constant","AudioManager","ccclass","property","Laser","start","init","skillInfo","baseInfo","scriptParent","node","active","_closeTimer","timer","setTimeout","isDie","instance","playSound","SOUND","LASER","scriptWarning","hideWarning","playTrail","putNode","flySpeed","clearTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAFZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;AACDC,MAAAA,O,GAAsBN,U,CAAtBM,O;AAASC,MAAAA,Q,GAAaP,U,CAAbO,Q,EACjB;;uBAEaC,K,WADZF,OAAO,CAAC,OAAD,C;;;;;;;;;;;;sEAEoB,I;;qEACD,I;;0EACK,I;;kEAEP,I;;;;;;;AAAM;eAE3BG,K,GAAA,iBAAS,CACL;AACH,S;;eAEMC,I,GAAP,cAAaC,SAAb,EAA6BC,QAA7B,EAA4CC,YAA5C,EAAgE;AAAA;;AAC5D,eAAKF,SAAL,GAAiBA,SAAjB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACA,eAAKE,IAAL,CAAUC,MAAV,GAAmB,KAAnB;;AACA,eAAKC,WAAL;;AAEA,eAAKC,KAAL,GAAaC,UAAU,CAAC,YAAI;AACxB,gBAAI,CAACL,YAAY,CAACM,KAAlB,EAAyB;AAAA;;AACrB;AAAA;AAAA,gDAAaC,QAAb,CAAsBC,SAAtB,CAAgC;AAAA;AAAA,wCAASC,KAAT,CAAeC,KAA/C;AACA,cAAA,MAAI,CAACT,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACAF,cAAAA,YAAY,SAAZ,IAAAA,YAAY,WAAZ,qCAAAA,YAAY,CAAEW,aAAd,gFAA6BC,WAA7B;AACA;AAAA;AAAA,kDAAcL,QAAd,CAAuBM,SAAvB,CAAiC,MAAI,CAACZ,IAAtC,EAA4C,CAA5C,EAA+C,YAAI;AAC/C,gBAAA,MAAI,CAACE,WAAL;;AACA;AAAA;AAAA,gDAAYI,QAAZ,CAAqBO,OAArB,CAA6B,MAAI,CAACb,IAAlC;AACH,eAHD,EAGGH,SAAS,CAACiB,QAHb;AAIH,aARD,MAQO;AACH,cAAA,MAAI,CAACZ,WAAL;AACH;AACJ,WAZsB,EAYpB,GAZoB,CAAvB;AAaH,S;;eAEOA,W,GAAR,uBAAuB;AACnB,cAAI,KAAKC,KAAT,EAAgB;AACZY,YAAAA,YAAY,CAAC,KAAKZ,KAAN,CAAZ;AACA,iBAAKA,KAAL,GAAa,IAAb;AACH;AACJ,S,CAED;AACA;AACA;;;;QAzCuBhB,S","sourcesContent":["import { poolManager } from './../../framework/poolManager';\nimport { EffectManager } from './../../framework/effectManager';\nimport { _decorator, Component, Node } from 'cc';\nimport { constant } from '../../framework/constant';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//激光技能组件\n@ccclass('Laser')\nexport class Laser extends Component {\n    public skillInfo: any = null!;//技能信息\n    public baseInfo: any = null!;//基础信息\n    public scriptWarning: any = null!;//预警技能脚本\n\n    private timer: any = null!;//\n\n    start () {\n        // [3]\n    }\n\n    public init (skillInfo: any, baseInfo: any, scriptParent?: any) {\n        this.skillInfo = skillInfo;\n        this.baseInfo = baseInfo;\n        this.node.active = false;\n        this._closeTimer();\n\n        this.timer = setTimeout(()=>{\n            if (!scriptParent.isDie) {\n                AudioManager.instance.playSound(constant.SOUND.LASER);  \n                this.node.active = true;\n                scriptParent?.scriptWarning?.hideWarning();\n                EffectManager.instance.playTrail(this.node, 0, ()=>{\n                    this._closeTimer();\n                    poolManager.instance.putNode(this.node);\n                }, skillInfo.flySpeed);\n            } else {\n                this._closeTimer();\n            }\n        }, 700)\n    }\n\n    private _closeTimer () {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null!;\n        }\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}