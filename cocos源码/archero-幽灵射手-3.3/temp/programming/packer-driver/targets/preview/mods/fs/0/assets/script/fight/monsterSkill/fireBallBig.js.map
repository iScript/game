{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/fight/monsterSkill/fireBallBig.ts"],"names":["_decorator","Component","tween","ParticleSystemComponent","constant","EffectManager","poolManager","resourceUtil","AudioManager","ccclass","property","FireBallBig","start","init","skillInfo","baseInfo","scriptParent","isPlayHitFireBall","playerWorPos","attackPos","node","setWorldPosition","x","z","children","forEach","ndChild","active","instance","playTrail","to","flySpeed","position","easing","call","playSound","SOUND","FIRE_BALL_BIG","scriptWarning","hideWarning","loadEffectRes","then","prefab","ndEffect","getNode","worldPosition","arrParticle","getComponentsInChildren","item","simulationSpeed","clear","stop","play","setTimeout","putNode"],"mappings":"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","sourcesContent":["import { constant } from './../../framework/constant';\nimport { GameManager } from './../gameManager';\nimport { _decorator, Component, Node, Vec3, tween, ParticleSystemComponent, Prefab } from 'cc';\nimport { EffectManager } from '../../framework/effectManager';\nimport { poolManager } from '../../framework/poolManager';\nimport { resourceUtil } from '../../framework/resourceUtil';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//大火球组件: 炸开的时候才有伤害，跟小火球一样\n@ccclass('FireBallBig')\nexport class FireBallBig extends Component {\n    public scriptWarning: any = null!;//预警技能脚本\n    public isPlayHitFireBall: boolean = false;//是否开始播放爆炸特效\n    public skillInfo: any = null!;//技能信息\n    public baseInfo: any = null!;//敌人基本信息\n\n    start () {\n        // [3]\n    }\n\n    public init (skillInfo: any, baseInfo: any, scriptParent?: any) {\n        this.skillInfo = skillInfo;\n        this.baseInfo = baseInfo;\n        this.isPlayHitFireBall = false;\n\n        let playerWorPos = scriptParent.attackPos;\n        this.node.setWorldPosition(playerWorPos.x, 23, playerWorPos.z);\n\n        this.node.children.forEach((ndChild: Node)=>{\n            ndChild.active = true;\n        })\n\n        EffectManager.instance.playTrail(this.node);\n\n        tween(this.node)\n        .to(1 / skillInfo.flySpeed, {position: playerWorPos}, {easing: \"elasticIn\"})\n        .call(()=>{\n            AudioManager.instance.playSound(constant.SOUND.FIRE_BALL_BIG);  \n\n            this.isPlayHitFireBall = true;\n            //关闭预警\n            scriptParent?.scriptWarning?.hideWarning();\n\n            this.node.children.forEach((ndChild: Node)=>{\n                ndChild.active = false;\n            })\n\n            // console.log(\"大火球碰到地面\");\n\n            resourceUtil.loadEffectRes(\"hit/hitFireBall2\").then((prefab: any)=>{\n                let ndEffect: Node = poolManager.instance.getNode(prefab as Prefab, this.node) as Node;\n                ndEffect.setWorldPosition(this.node.worldPosition);  \n    \n                let arrParticle:  ParticleSystemComponent[]= ndEffect.getComponentsInChildren(ParticleSystemComponent);\n                arrParticle.forEach((item: ParticleSystemComponent)=>{\n                    item.simulationSpeed = 1;\n                    item?.clear();\n                    item?.stop();\n                    item?.play()\n                })\n    \n                setTimeout(()=>{\n                    poolManager.instance.putNode(ndEffect);\n                    poolManager.instance.putNode(this.node);\n                }, 3000)  \n            })\n        })\n        .start()\n    }\n}"]}