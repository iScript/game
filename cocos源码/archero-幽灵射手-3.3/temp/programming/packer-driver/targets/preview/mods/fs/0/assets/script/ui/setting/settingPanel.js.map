{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/setting/settingPanel.ts"],"names":["SpriteFrame","SpriteComponent","Vec3","profiler","LabelComponent","_decorator","Component","Node","uiManager","AudioManager","StorageManager","constant","ccclass","property","SettingPanel","start","show","_isMusicOpen","instance","getAudioSetting","_changeState","ndBtnMusic","_isVibrationOpen","getGlobalData","ndBtnVibration","_isDebugOpen","ndBtnDebug","ndParget","isOpen","spCom","getComponent","ndDot","getChildByName","lbTxt","ndDotPos","position","spriteFrame","sfSelect","_curDotPos","set","y","z","setPosition","string","sfUnSelect","onBtnVibrationClick","playSound","SOUND","CLICK","setGlobalData","onBtnMusicClick","openMusic","openSound","closeMusic","closeSound","onBtnDebugClick","showStats","hideStats","onBtnCloseClick","hideDialog"],"mappings":"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","sourcesContent":["import { uiManager } from './../../framework/uiManager';\nimport { AudioManager } from './../../framework/audioManager';\nimport { SpriteFrame, SpriteComponent, Vec3, profiler, LabelComponent } from 'cc';\nimport { _decorator, Component, Node } from 'cc';\nimport { StorageManager } from '../../framework/storageManager';\nimport { constant } from '../../framework/constant';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SettingPanel')\nexport class SettingPanel extends Component {\n    @property(SpriteFrame)\n    public sfSelect: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    public sfUnSelect: SpriteFrame = null!;\n\n    @property(Node)\n    public ndBtnVibration: Node = null!;\n\n    @property(Node)\n    public ndBtnMusic: Node = null!;\n\n    @property(Node)\n    public ndBtnDebug: Node = null!;\n    \n    private _isMusicOpen: boolean = false;\n    private _isVibrationOpen: boolean = false;\n    private _isDebugOpen: boolean = false;\n    private _curDotPos: Vec3 = new Vec3();//当前选中点的位置\n\n    start () {\n        // [3]\n    }\n\n    public show () {\n        this._isMusicOpen = AudioManager.instance.getAudioSetting(true);\n        this._changeState(this.ndBtnMusic, this._isMusicOpen);\n\n        this._isVibrationOpen = StorageManager.instance.getGlobalData(\"vibration\") ?? true;\n        this._changeState(this.ndBtnVibration, this._isVibrationOpen);\n\n        this._isDebugOpen = StorageManager.instance.getGlobalData(\"debug\") ?? false;\n        this._changeState(this.ndBtnDebug, this._isDebugOpen);\n    }\n\n    private _changeState (ndParget: Node, isOpen: boolean) {\n        let spCom = ndParget.getComponent(SpriteComponent) as SpriteComponent;\n        let ndDot = ndParget.getChildByName(\"dot\") as Node;\n        let lbTxt = ndDot.getChildByName(\"txt\")?.getComponent(LabelComponent) as LabelComponent;\n        let ndDotPos = ndDot.position;\n\n        if (isOpen) {\n            spCom.spriteFrame = this.sfSelect;\n            this._curDotPos.set(24, ndDotPos.y, ndDotPos.z);\n            ndDot.setPosition(this._curDotPos);\n            lbTxt.string = \"开\";\n        } else {\n            spCom.spriteFrame = this.sfUnSelect;\n            this._curDotPos.set(-24, ndDotPos.y, ndDotPos.z);\n            ndDot.setPosition(this._curDotPos);\n            lbTxt.string = \"关\";\n        }\n    }\n\n    public onBtnVibrationClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        this._isVibrationOpen = !this._isVibrationOpen;\n        this._changeState(this.ndBtnVibration, this._isVibrationOpen);\n        StorageManager.instance.setGlobalData(\"vibration\", this._isVibrationOpen);\n    }\n\n    public onBtnMusicClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        this._isMusicOpen = !this._isMusicOpen;\n        this._changeState(this.ndBtnMusic, this._isMusicOpen);\n\n        if (this._isMusicOpen) {\n            AudioManager.instance.openMusic();\n            AudioManager.instance.openSound();\n        } else {\n            AudioManager.instance.closeMusic();\n            AudioManager.instance.closeSound();\n        }\n    }\n\n    public onBtnDebugClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        this._isDebugOpen = !this._isDebugOpen;\n        this._changeState(this.ndBtnDebug, this._isDebugOpen);\n        StorageManager.instance.setGlobalData(\"debug\", this._isDebugOpen);\n\n        this._isDebugOpen === true ? profiler.showStats() : profiler.hideStats();\n    }\n\n    public onBtnCloseClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        uiManager.instance.hideDialog(\"setting/settingPanel\");\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}