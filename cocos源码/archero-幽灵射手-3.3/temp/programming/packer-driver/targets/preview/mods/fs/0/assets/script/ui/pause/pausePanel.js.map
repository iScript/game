{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/pause/pausePanel.ts"],"names":["_decorator","Component","Node","SpriteComponent","LabelComponent","SpriteFrame","clientEvent","constant","GameManager","uiManager","SkillList","AudioManager","resourceUtil","playerData","ccclass","property","PausePanel","start","show","arrSkill","instance","playerInfo","length","ndSkillItem","active","ndSkillList","scriptSkillList","getComponent","init","itemInfo","lbSkillName","string","name","lbSkillDesc","desc","setSpriteFrame","icon","spSkillIcon","err","_isMusicOpen","getAudioSetting","changeState","spBtnSound","spriteFrame","sfMusicOn","sfMusicOff","onBtnSoundClick","playSound","SOUND","CLICK","openMusic","openSound","closeMusic","closeSound","onBtnHomeClick","showDialog","hideDialog","isGameOver","dispatchEvent","EVENT_TYPE","RECYCLE_ALL","PRIORITY","WAITING","onBtnPlayClick","isGamePause"],"mappings":"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","sourcesContent":["import { clientEvent } from './../../framework/clientEvent';\nimport { constant } from './../../framework/constant';\nimport { GameManager } from './../../fight/gameManager';\nimport { uiManager } from './../../framework/uiManager';\nimport { SkillList } from './skillList';\nimport { _decorator, Component, Node, SpriteComponent, LabelComponent, SpriteFrame } from 'cc';\nimport { AudioManager } from '../../framework/audioManager';\nimport { resourceUtil } from '../../framework/resourceUtil';\nimport { playerData } from '../../framework/playerData';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PausePanel')\nexport class PausePanel extends Component {\n    @property(SpriteComponent)\n    public spSkillIcon: SpriteComponent = null!;\n\n    @property(LabelComponent)\n    public lbSkillName: LabelComponent = null!;\n\n    @property(LabelComponent)\n    public lbSkillDesc: LabelComponent = null!;\n\n    @property(Node)\n    public ndSkillList: Node = null!;\n\n    @property(SpriteFrame)\n    public sfMusicOn: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    public sfMusicOff: SpriteFrame = null!;\n\n    @property(SpriteComponent)\n    public spBtnSound: SpriteComponent = null!;\n\n    @property(Node)\n    public ndSkillItem: Node = null!;\n\n    private _isMusicOpen: boolean = false;\n\n    start () {\n        // [3]\n    }\n\n    show () {\n        let arrSkill = playerData.instance.playerInfo.arrSkill;\n        if (!arrSkill.length) {\n            this.ndSkillItem.active = false;\n            this.ndSkillList.active = false;\n        } else {\n            this.ndSkillItem.active = true;\n            this.ndSkillList.active = true;\n\n            let scriptSkillList = this.ndSkillList.getComponent(SkillList) as SkillList;\n\n            scriptSkillList.init((itemInfo: any)=>{\n                this.lbSkillName.string = itemInfo.name;\n                this.lbSkillDesc.string = itemInfo.desc;\n                resourceUtil.setSpriteFrame(`texture/skillIcon/${itemInfo.icon}`, this.spSkillIcon, (err: any)=>{});\n            });\n        }\n\n        this._isMusicOpen = AudioManager.instance.getAudioSetting(true);\n        this.changeState();\n    }\n\n    public changeState () {\n        if (this._isMusicOpen) {\n            this.spBtnSound.spriteFrame = this.sfMusicOn;\n        } else {\n            this.spBtnSound.spriteFrame = this.sfMusicOff;\n        }\n    }\n\n    public onBtnSoundClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        this._isMusicOpen = !this._isMusicOpen;\n        this.changeState();\n\n        if (this._isMusicOpen) {\n            AudioManager.instance.openMusic();\n            AudioManager.instance.openSound();\n        } else {\n            AudioManager.instance.closeMusic();\n            AudioManager.instance.closeSound();\n        }\n    }\n\n    public onBtnHomeClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        uiManager.instance.showDialog(\"back/backPanel\", [()=>{\n            uiManager.instance.hideDialog(\"fight/fightPanel\");\n            uiManager.instance.hideDialog(\"pause/pausePanel\");\n            GameManager.isGameOver = true;\n            clientEvent.dispatchEvent(constant.EVENT_TYPE.RECYCLE_ALL);\n            uiManager.instance.showDialog(\"home/homePanel\");\n        }], ()=>{}, constant.PRIORITY.WAITING);\n    }\n\n    public onBtnPlayClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        uiManager.instance.hideDialog(\"pause/pausePanel\");\n        GameManager.isGamePause = false;\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}