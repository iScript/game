{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/fight/gameCamera.ts"],"names":["_decorator","Component","Vec3","ccclass","property","GameCamera","start","_oriCameraWorPos","node","worldPosition","clone","resetCamera","_targetCameraWorPos","set","lateUpdate","ndFollowTarget","lerp","_curCameraWorPos","x","y","z","setWorldPosition"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;;;;;;;AAC9BC,MAAAA,O,GAAsBH,U,CAAtBG,O;AAASC,MAAAA,Q,GAAaJ,U,CAAbI,Q;;4BAEJC,U,WADZF,OAAO,CAAC,YAAD,C;;;;;;;;;;;;2EAG0B,I;;6EAEG,IAAID,IAAJ,E;;gFACG,IAAIA,IAAJ,E;;6EACH,IAAIA,IAAJ,E;;;;;;;AAAW;eAE5CI,K,GAAA,iBAAS;AACL,eAAKC,gBAAL,GAAwB,KAAKC,IAAL,CAAUC,aAAV,CAAwBC,KAAxB,EAAxB;AACH,S;;eAEMC,W,GAAP,uBAAsB;AAClB,eAAKC,mBAAL,CAAyBC,GAAzB,CAA6B,KAAKN,gBAAlC;AACH,S,CAED;AACA;AACA;;;eAEAO,U,GAAA,sBAAc;AACV,cAAI,CAAC,KAAKC,cAAN,IAAwB,CAAC,KAAKA,cAAL,CAAoBN,aAAjD,EAAgE;AAC5D;AACH;;AAED,eAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBI,IAAzB,CAA8B,KAAKD,cAAL,CAAoBN,aAAlD,EAAiE,GAAjE,CAA3B;;AACA,eAAKQ,gBAAL,CAAsBJ,GAAtB,CAA0B,KAAKN,gBAAL,CAAsBW,CAAtB,GAA0B,KAAKN,mBAAL,CAAyBM,CAA7E,EAAgF,KAAKX,gBAAL,CAAsBY,CAAtG,EAAyG,KAAKZ,gBAAL,CAAsBa,CAAtB,GAA0B,KAAKR,mBAAL,CAAyBQ,CAA5J;;AACA,eAAKZ,IAAL,CAAUa,gBAAV,CAA2B,KAAKJ,gBAAhC;AACH,S;;;QA5B2BhB,S","sourcesContent":["import { _decorator, Component, Node, Vec3 } from 'cc';\nconst { ccclass, property } = _decorator;\n@ccclass('GameCamera')\nexport class GameCamera extends Component {\n\n    public ndFollowTarget: Node = null!;//相机跟随的目标节点\n\n    private _oriCameraWorPos: Vec3 = new Vec3();//初始相机世界坐标\n    private _targetCameraWorPos: Vec3 = new Vec3();//目标相机世界坐标\n    private _curCameraWorPos: Vec3 = new Vec3();//目标相机世界坐标\n\n    start () {\n        this._oriCameraWorPos = this.node.worldPosition.clone();\n    }\n\n    public resetCamera () {\n        this._targetCameraWorPos.set(this._oriCameraWorPos);\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n\n    lateUpdate () {\n        if (!this.ndFollowTarget || !this.ndFollowTarget.worldPosition) {\n            return;\n        }\n\n        this._targetCameraWorPos = this._targetCameraWorPos.lerp(this.ndFollowTarget.worldPosition, 0.5);\n        this._curCameraWorPos.set(this._oriCameraWorPos.x + this._targetCameraWorPos.x, this._oriCameraWorPos.y, this._oriCameraWorPos.z + this._targetCameraWorPos.z);\n        this.node.setWorldPosition(this._curCameraWorPos);\n    }\n}"]}