{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/pause/skillList.ts"],"names":["_decorator","Component","Prefab","constant","localConfig","SkillIcon","poolManager","playerData","ccclass","property","SkillList","start","init","callback","arrUnLockSkill","instance","playerInfo","arrSkill","concat","node","children","forEach","ndChild","active","length","MAX_SKILL_ICON_NUM","skillInfo","idx","getNode","pbSkillIcon","itemInfo","queryByID","scriptSkillIcon","getComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;;AAL7BC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,W,iBAAAA,W;;AAGAC,MAAAA,U,iBAAAA,U;;;;;;;AACDC,MAAAA,O,GAAsBR,U,CAAtBQ,O;AAASC,MAAAA,Q,GAAaT,U,CAAbS,Q;;2BAGJC,S,WADZF,OAAO,CAAC,WAAD,C,UAEHC,QAAQ,CAACP,MAAD,C;;;;;;;;;;;;;;;;;;;eAGTS,K,GAAA,iBAAS,CACL;AACH,S;;eAEMC,I,GAAP,cAAaC,QAAb,EAAkC;AAAA;;AAC9B,cAAIC,cAAc,GAAG;AAAA;AAAA,wCAAWC,QAAX,CAAoBC,UAApB,CAA+BC,QAA/B,CAAwCC,MAAxC,EAArB;AAEA,eAAKC,IAAL,CAAUC,QAAV,CAAmBC,OAAnB,CAA2B,UAACC,OAAD,EAAiB;AACxCA,YAAAA,OAAO,CAACC,MAAR,GAAiB,KAAjB;AACH,WAFD;;AAIA,cAAIT,cAAc,CAACU,MAAf,GAAwB;AAAA;AAAA,oCAASC,kBAArC,EAAyD;AACrDX,YAAAA,cAAc,CAACU,MAAf,GAAwB;AAAA;AAAA,sCAASC,kBAAjC;AACH;;AAEDX,UAAAA,cAAc,CAACO,OAAf,CAAuB,UAACK,SAAD,EAAiBC,GAAjB,EAA+B;AAClD,gBAAIL,OAAJ;;AACA,gBAAIK,GAAG,IAAI,MAAI,CAACR,IAAL,CAAUC,QAAV,CAAmBI,MAA9B,EAAsC;AAClCF,cAAAA,OAAO,GAAG;AAAA;AAAA,8CAAYP,QAAZ,CAAqBa,OAArB,CAA6B,MAAI,CAACC,WAAlC,EAA+C,MAAI,CAACV,IAApD,CAAV;AACH,aAFD,MAEO;AACHG,cAAAA,OAAO,GAAG,MAAI,CAACH,IAAL,CAAUC,QAAV,CAAmBO,GAAnB,CAAV;AACH;;AAEDL,YAAAA,OAAO,CAACC,MAAR,GAAiB,IAAjB;AACA,gBAAIO,QAAQ,GAAG;AAAA;AAAA,4CAAYf,QAAZ,CAAqBgB,SAArB,CAA+B,aAA/B,EAA8CjB,cAAc,CAACa,GAAD,CAA5D,CAAf;AACA,gBAAIK,eAAe,GAAGV,OAAO,CAACW,YAAR;AAAA;AAAA,uCAAtB;AACAD,YAAAA,eAAe,CAACpB,IAAhB,CAAqBe,GAArB,EAA0BG,QAA1B,EAAoCjB,QAApC;AACH,WAZD;AAaH,S,CAED;AACA;AACA;;;;QApC2BZ,S;;;;;iBAEE,I","sourcesContent":["import { constant } from './../../framework/constant';\nimport { localConfig } from './../../framework/localConfig';\nimport { SkillIcon } from './skillIcon';\nimport { poolManager } from './../../framework/poolManager';\n\nimport { _decorator, Component, Node, Prefab } from 'cc';\nimport { playerData } from '../../framework/playerData';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SkillList')\nexport class SkillList extends Component {\n    @property(Prefab)\n    public pbSkillIcon: Prefab = null!;\n\n    start () {\n        // [3]\n    }\n\n    public init (callback?: Function) {\n        let arrUnLockSkill = playerData.instance.playerInfo.arrSkill.concat();\n\n        this.node.children.forEach((ndChild: Node)=>{\n            ndChild.active = false;\n        })\n\n        if (arrUnLockSkill.length > constant.MAX_SKILL_ICON_NUM) {\n            arrUnLockSkill.length = constant.MAX_SKILL_ICON_NUM;\n        }\n        \n        arrUnLockSkill.forEach((skillInfo: any, idx: number)=>{\n            let ndChild: Node;\n            if (idx >= this.node.children.length) {\n                ndChild = poolManager.instance.getNode(this.pbSkillIcon, this.node) as Node;\n            } else {\n                ndChild = this.node.children[idx];\n            }\n\n            ndChild.active = true;\n            let itemInfo = localConfig.instance.queryByID(\"playerSkill\", arrUnLockSkill[idx]);\n            let scriptSkillIcon = ndChild.getComponent(SkillIcon) as SkillIcon;\n            scriptSkillIcon.init(idx, itemInfo, callback);\n        })\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}