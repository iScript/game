{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/debug/debugLevelItem.ts"],"names":["_decorator","Component","LabelComponent","SpriteComponent","Color","constant","uiManager","playerData","clientEvent","AudioManager","ccclass","property","DebugLevelItem","fromHEX","onEnable","on","EVENT_TYPE","HIDE_DEBUG_LEVEL_SELECTED","_hideDebugLevelSelected","onDisable","off","start","init","itemInfo","_level","ID","lbLevelTxt","string","_itemInfo","_refreshState","_isSelected","instance","playerInfo","level","spCom","color","_colorSelected","_colorUnSelected","onBtnClick","playSound","SOUND","CLICK","dispatchEvent","RECYCLE_ALL","Number","savePlayerInfoToLocalCache","ON_GAME_INIT","hideDialog"],"mappings":"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","sourcesContent":["import { constant } from './../../framework/constant';\nimport { uiManager } from './../../framework/uiManager';\nimport { playerData } from './../../framework/playerData';\n\nimport { _decorator, Component, Node, LabelComponent, SpriteComponent, Color } from 'cc';\nimport { clientEvent } from '../../framework/clientEvent';\nimport { GameManager } from '../../fight/gameManager';\nimport { poolManager } from '../../framework/poolManager';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('DebugLevelItem')\nexport class DebugLevelItem extends Component {\n    @property(LabelComponent)\n    public lbLevelTxt: LabelComponent = null!;\n\n    @property(SpriteComponent)\n    public spCom: SpriteComponent = null!;\n\n    private _colorSelected: Color = new Color().fromHEX(\"#3CE649\");\n    private _colorUnSelected: Color = new Color().fromHEX(\"#ffffff\");\n    private _isSelected: boolean = false;\n    private _level: number = 0;\n    private _itemInfo: any = null!;\n\n    onEnable () {\n        clientEvent.on(constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED, this._hideDebugLevelSelected, this);\n    }\n\n    onDisable () {\n        clientEvent.off(constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED, this._hideDebugLevelSelected, this);\n    }\n\n    start () {\n        // [3]\n    }\n\n    public init (itemInfo: any) {\n        this._level = itemInfo.ID;\n        this.lbLevelTxt.string = `${this._level}`;\n        this._itemInfo = itemInfo;\n        this._refreshState();\n    }\n\n    /**\n     * 切换选中与非选中状态\n     *\n     * @private\n     * @memberof DebugSkillItem\n     */\n    private _refreshState () {\n        this._isSelected = playerData.instance.playerInfo.level === this._itemInfo.ID;\n        if (this._isSelected) {\n            this.spCom.color = this._colorSelected;\n        } else {\n            this.spCom.color = this._colorUnSelected;\n        }\n    }\n\n    public onBtnClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        clientEvent.dispatchEvent(constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED);\n        this._isSelected = true;\n        this._refreshState();\n        \n        clientEvent.dispatchEvent(constant.EVENT_TYPE.RECYCLE_ALL);\n\n        playerData.instance.playerInfo.level = Number(this._level);\n        playerData.instance.savePlayerInfoToLocalCache();\n        clientEvent.dispatchEvent(constant.EVENT_TYPE.ON_GAME_INIT);\n        uiManager.instance.hideDialog(\"debug/debugPanel\");\n    }\n\n    /**\n     * 隐藏选中状态\n     *\n     * @private\n     * @memberof DebugLevelItem\n     */\n    private _hideDebugLevelSelected () {\n        this._isSelected = false;\n        this._refreshState();\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}