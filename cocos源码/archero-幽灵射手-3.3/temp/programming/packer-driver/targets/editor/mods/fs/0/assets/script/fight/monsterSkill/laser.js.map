{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/fight/monsterSkill/laser.ts"],"names":["_decorator","Component","poolManager","EffectManager","constant","AudioManager","ccclass","property","Laser","start","init","skillInfo","baseInfo","scriptParent","node","active","_closeTimer","timer","setTimeout","isDie","instance","playSound","SOUND","LASER","scriptWarning","hideWarning","playTrail","putNode","flySpeed","clearTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAFZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U,GAC9B;;uBAEaQ,K,WADZF,OAAO,CAAC,OAAD,C,yBAAR,MACaE,KADb,SAC2BP,SAD3B,CACqC;AAAA;AAAA;;AAAA,6CACT,IADS;;AAAA,4CAEV,IAFU;;AAAA,iDAGL,IAHK;;AAAA,yCAKZ,IALY;AAAA;;AAKN;AAE3BQ,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEC,SAAF,EAAkBC,QAAlB,EAAiCC,YAAjC,EAAqD;AAC5D,eAAKF,SAAL,GAAiBA,SAAjB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACA,eAAKE,IAAL,CAAUC,MAAV,GAAmB,KAAnB;;AACA,eAAKC,WAAL;;AAEA,eAAKC,KAAL,GAAaC,UAAU,CAAC,MAAI;AACxB,gBAAI,CAACL,YAAY,CAACM,KAAlB,EAAyB;AAAA;;AACrB;AAAA;AAAA,gDAAaC,QAAb,CAAsBC,SAAtB,CAAgC;AAAA;AAAA,wCAASC,KAAT,CAAeC,KAA/C;AACA,mBAAKT,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACAF,cAAAA,YAAY,SAAZ,IAAAA,YAAY,WAAZ,qCAAAA,YAAY,CAAEW,aAAd,gFAA6BC,WAA7B;AACA;AAAA;AAAA,kDAAcL,QAAd,CAAuBM,SAAvB,CAAiC,KAAKZ,IAAtC,EAA4C,CAA5C,EAA+C,MAAI;AAC/C,qBAAKE,WAAL;;AACA;AAAA;AAAA,gDAAYI,QAAZ,CAAqBO,OAArB,CAA6B,KAAKb,IAAlC;AACH,eAHD,EAGGH,SAAS,CAACiB,QAHb;AAIH,aARD,MAQO;AACH,mBAAKZ,WAAL;AACH;AACJ,WAZsB,EAYpB,GAZoB,CAAvB;AAaH;;AAEOA,QAAAA,WAAW,GAAI;AACnB,cAAI,KAAKC,KAAT,EAAgB;AACZY,YAAAA,YAAY,CAAC,KAAKZ,KAAN,CAAZ;AACA,iBAAKA,KAAL,GAAa,IAAb;AACH;AACJ,SArCgC,CAuCjC;AACA;AACA;;;AAzCiC,O","sourcesContent":["import { poolManager } from './../../framework/poolManager';\nimport { EffectManager } from './../../framework/effectManager';\nimport { _decorator, Component, Node } from 'cc';\nimport { constant } from '../../framework/constant';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//激光技能组件\n@ccclass('Laser')\nexport class Laser extends Component {\n    public skillInfo: any = null!;//技能信息\n    public baseInfo: any = null!;//基础信息\n    public scriptWarning: any = null!;//预警技能脚本\n\n    private timer: any = null!;//\n\n    start () {\n        // [3]\n    }\n\n    public init (skillInfo: any, baseInfo: any, scriptParent?: any) {\n        this.skillInfo = skillInfo;\n        this.baseInfo = baseInfo;\n        this.node.active = false;\n        this._closeTimer();\n\n        this.timer = setTimeout(()=>{\n            if (!scriptParent.isDie) {\n                AudioManager.instance.playSound(constant.SOUND.LASER);  \n                this.node.active = true;\n                scriptParent?.scriptWarning?.hideWarning();\n                EffectManager.instance.playTrail(this.node, 0, ()=>{\n                    this._closeTimer();\n                    poolManager.instance.putNode(this.node);\n                }, skillInfo.flySpeed);\n            } else {\n                this._closeTimer();\n            }\n        }, 700)\n    }\n\n    private _closeTimer () {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null!;\n        }\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}