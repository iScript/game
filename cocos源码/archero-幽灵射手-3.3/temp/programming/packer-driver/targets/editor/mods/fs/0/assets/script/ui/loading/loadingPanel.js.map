{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/loading/loadingPanel.ts"],"names":["_decorator","Component","AnimationComponent","constant","uiManager","clientEvent","GameManager","ccclass","property","LoadingPanel","onEnable","on","EVENT_TYPE","SHOW_LOADING_PANEL","_showLoadingPanel","HIDE_LOADING_PANEL","_hideLoadingPanel","onDisable","off","start","show","scriptGameCamera","resetCamera","aniCloud","getState","time","sample","play","once","EventType","FINISHED","instance","hideDialog","showDialog"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAwEC,MAAAA,kB,OAAAA,kB;;AAFpFC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;AAEAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;8BAGjBS,Y,WADZF,OAAO,CAAC,cAAD,C,UAKHC,QAAQ,CAACN,kBAAD,C,oCALb,MACaO,YADb,SACkCR,SADlC,CAC4C;AAAA;AAAA;;AAAA;AAAA;;AAOxCS,QAAAA,QAAQ,GAAI;AACR;AAAA;AAAA,0CAAYC,EAAZ,CAAe;AAAA;AAAA,oCAASC,UAAT,CAAoBC,kBAAnC,EAAuD,KAAKC,iBAA5D,EAA+E,IAA/E;AACA;AAAA;AAAA,0CAAYH,EAAZ,CAAe;AAAA;AAAA,oCAASC,UAAT,CAAoBG,kBAAnC,EAAuD,KAAKC,iBAA5D,EAA+E,IAA/E;AACH;;AAEDC,QAAAA,SAAS,GAAI;AACT;AAAA;AAAA,0CAAYC,GAAZ,CAAgB;AAAA;AAAA,oCAASN,UAAT,CAAoBC,kBAApC,EAAwD,KAAKC,iBAA7D,EAAgF,IAAhF;AACA;AAAA;AAAA,0CAAYI,GAAZ,CAAgB;AAAA;AAAA,oCAASN,UAAT,CAAoBG,kBAApC,EAAwD,KAAKC,iBAA7D,EAAgF,IAAhF;AACH;;AAEDG,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,GAAI;AACX,eAAKN,iBAAL;AACH;;AAEOE,QAAAA,iBAAiB,GAAI;AACzB;AAAA;AAAA,0CAAYK,gBAAZ,CAA6BC,WAA7B;AAEA,eAAKC,QAAL,CAAcC,QAAd,CAAuB,mBAAvB,EAA4CC,IAA5C,GAAmD,CAAnD;AACA,eAAKF,QAAL,CAAcC,QAAd,CAAuB,mBAAvB,EAA4CE,MAA5C;AACA,eAAKH,QAAL,CAAcI,IAAd,CAAmB,mBAAnB;AACA,eAAKJ,QAAL,CAAcK,IAAd,CAAmB1B,kBAAkB,CAAC2B,SAAnB,CAA6BC,QAAhD,EAA0D,MAAI;AAC1D;AAAA;AAAA,wCAAUC,QAAV,CAAmBC,UAAnB,CAA8B,sBAA9B;AACA;AAAA;AAAA,wCAAUD,QAAV,CAAmBE,UAAnB,CAA8B,kBAA9B,EAAkD,CAAC,IAAD,CAAlD;AACH,WAHD;AAIH;;AAEOnB,QAAAA,iBAAiB,GAAI;AACzB,eAAKS,QAAL,CAAcC,QAAd,CAAuB,kBAAvB,EAA2CC,IAA3C,GAAkD,CAAlD;AACA,eAAKF,QAAL,CAAcC,QAAd,CAAuB,kBAAvB,EAA2CE,MAA3C;AACA,eAAKH,QAAL,CAAcI,IAAd,CAAmB,kBAAnB;AACH,SAzCuC,CA2CxC;AACA;AACA;;;AA7CwC,O;;;;;iBAKF,I","sourcesContent":["import { constant } from './../../framework/constant';\nimport { uiManager } from './../../framework/uiManager';\nimport { _decorator, Component, Node, Tween, tween, UIOpacityComponent, UIComponent, easing, AnimationComponent } from 'cc';\nimport { clientEvent } from '../../framework/clientEvent';\nimport { GameManager } from '../../fight/gameManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LoadingPanel')\nexport class LoadingPanel extends Component {\n    // @property(UIOpacityComponent)\n    // public opacityCom: UIOpacityComponent = null!;\n\n    @property(AnimationComponent)\n    public aniCloud: AnimationComponent = null!;\n\n    onEnable () {\n        clientEvent.on(constant.EVENT_TYPE.SHOW_LOADING_PANEL, this._showLoadingPanel, this);\n        clientEvent.on(constant.EVENT_TYPE.HIDE_LOADING_PANEL, this._hideLoadingPanel, this);\n    }\n\n    onDisable () {\n        clientEvent.off(constant.EVENT_TYPE.SHOW_LOADING_PANEL, this._showLoadingPanel, this);\n        clientEvent.off(constant.EVENT_TYPE.HIDE_LOADING_PANEL, this._hideLoadingPanel, this);\n    }\n\n    start () {\n        // [3]\n    }\n\n    public show () {\n        this._showLoadingPanel();\n    }\n\n    private _hideLoadingPanel () {\n        GameManager.scriptGameCamera.resetCamera();       \n       \n        this.aniCloud.getState(\"cloudAnimationOut\").time = 0;\n        this.aniCloud.getState(\"cloudAnimationOut\").sample();\n        this.aniCloud.play(\"cloudAnimationOut\");\n        this.aniCloud.once(AnimationComponent.EventType.FINISHED, ()=>{\n            uiManager.instance.hideDialog(\"loading/loadingPanel\");\n            uiManager.instance.showDialog(\"fight/fightPanel\", [this]);\n        });\n    }\n\n    private _showLoadingPanel () {\n        this.aniCloud.getState(\"cloudAnimationIn\").time = 0;\n        this.aniCloud.getState(\"cloudAnimationIn\").sample();\n        this.aniCloud.play(\"cloudAnimationIn\");\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}