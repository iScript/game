{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/fight/monsterSkillCollider.ts"],"names":["_decorator","Component","MeshColliderComponent","BoxColliderComponent","CylinderColliderComponent","Vec3","Enum","CapsuleColliderComponent","SphereCollider","poolManager","GameManager","constant","DispersionSurround","Dispersion","EnergyBall","JetFires","FireBall","FireBallBig","Laser","Tornado","ccclass","property","COLLIDER_NAME","ENERGY_BALL","FIRE_BALL","JET_FIRES","DISPERSION","TORNADO","FIRE_BALL_BIG","DISPERSION_SURROUND","LASER","MonsterSkillCollider","type","displayOrder","onLoad","colliderCom","node","getComponent","console","error","onEnable","colliderName","on","_onTriggerStayCb","_onTriggerExitCb","isTrigger","_onTriggerEnterCb","_onCollisionEnterCb","onDisable","off","start","_oriScale","getScale","_oriWorPos","getWorldPosition","init","event","_hitTarget","otherCollider","isGameOver","isGameStart","getGroup","PHY_GROUP","OBSTACLE","scriptSkillCollider","skillInfo","penetrate","instance","putNode","hide","parent","PLAYER","ndPlayer","_hitPlayer","baseInfo","warn","log","scriptPlayer","reduceBlood","_isOnJetFires","update","deltaTime","_checkInterval"],"mappings":"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","sourcesContent":["import { poolManager } from './../framework/poolManager';\nimport { GameManager } from './gameManager';\nimport { _decorator, Component, MeshColliderComponent, Quat, BoxColliderComponent, CylinderColliderComponent, ITriggerEvent, Vec3, Enum, AnimationComponent, CapsuleColliderComponent, SphereCollider, Node } from 'cc';\nimport { constant } from '../framework/constant';\nimport { DispersionSurround } from './monsterSkill/dispersionSurround';\nimport { Dispersion } from './monsterSkill/dispersion';\nimport { EnergyBall } from './monsterSkill/energyBall';\nimport { JetFires } from './monsterSkill/jetFires';\nimport { FireBall } from './monsterSkill/fireBall';\nimport { FireBallBig } from './monsterSkill/fireBallBig';\nimport { Laser } from './monsterSkill/laser';\nimport { Tornado } from './monsterSkill/tornado';\n//怪物武器碰撞器/触发器组件\nconst { ccclass, property } = _decorator;\n\nconst COLLIDER_NAME = Enum ({\n    ENERGY_BALL: 1,//直线飞行能量球\n    FIRE_BALL: 2,//线飞行的小火球\n    JET_FIRES: 3,//直线范围型的火焰\n    DISPERSION: 4,//180度散射\n    TORNADO: 5,//旋转前进的龙卷风\n    FIRE_BALL_BIG: 6,//直线下坠的大火团 \n    DISPERSION_SURROUND: 7,//360度六角形散射\n    LASER: 8,//直线激光\n})\n\n@ccclass('MonsterSkillCollider')\nexport class MonsterSkillCollider extends Component {\n    @property({\n        type: COLLIDER_NAME,\n        displayOrder: 1\n    })\n    public colliderName: any = COLLIDER_NAME.ENERGY_BALL;//碰撞体/触发器类型名称\n\n    public colliderCom: any = null;\n    public ani: AnimationComponent = null!;\n    \n    public static COLLIDER_NAME = COLLIDER_NAME;\n\n    private _oriScale: Vec3 = new Vec3();//原始缩放大小\n    private _oriWorPos: Vec3 = new Vec3();//原始世界坐标\n    private _isOnJetFires: boolean = false;//是否处在龙火焰中\n    private _checkInterval: number = 1;//在尖刺路上减去体积的间隔时间为1秒\n\n    onLoad () {\n        this.colliderCom = this.node.getComponent(BoxColliderComponent) || this.node.getComponent(CylinderColliderComponent) || this.node.getComponent(SphereCollider) ||this.node.getComponent(CapsuleColliderComponent) || this.node.getComponent(MeshColliderComponent) || this.node.getComponent(CylinderColliderComponent);\n\n        if (!this.colliderCom) {\n            console.error(\"this node does not have collider component\");\n        }\n    }\n\n    onEnable () {\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES) {\n            this.colliderCom.on(\"onTriggerStay\", this._onTriggerStayCb, this);\n            this.colliderCom.on(\"onTriggerExit\", this._onTriggerExitCb, this);\n        } else {\n            if (this.colliderCom.isTrigger) {\n                this.colliderCom.on('onTriggerEnter', this._onTriggerEnterCb, this);\n            } else {\n                this.colliderCom.on('onCollisionEnter', this._onCollisionEnterCb, this);\n            }\n        }\n    }\n\n    onDisable () {\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES) {\n            this.colliderCom.off(\"onTriggerStay\", this._onTriggerStayCb, this);\n            this.colliderCom.off(\"onTriggerExit\", this._onTriggerExitCb, this);\n        } else {\n            if (this.colliderCom.isTrigger) {\n                this.colliderCom.off('onTriggerEnter', this._onTriggerEnterCb, this);\n            } else {\n                this.colliderCom.off('onCollisionEnter', this._onCollisionEnterCb, this);\n            }\n        }\n    }\n\n    start () {\n        this._oriScale = this.node.getScale();\n        this._oriWorPos = this.node.getWorldPosition();\n    }\n\n    /**\n     * 初始化\n     */\n    public init () {\n\n    }   \n\n    private _onTriggerEnterCb (event: ITriggerEvent) {\n       this._hitTarget(event.otherCollider);\n    }\n\n    private _onCollisionEnterCb (event: ITriggerEvent) {\n       this._hitTarget(event.otherCollider);\n    }\n\n    private _hitTarget (otherCollider: any) {\n        if (GameManager.isGameOver || !GameManager.isGameStart) {\n            return;\n        }\n\n        if (otherCollider.getGroup() === constant.PHY_GROUP.OBSTACLE) {\n            //技能碰到游戏中的障碍则回收\n            let scriptSkillCollider: any = null;\n\n            switch (this.colliderName) {\n                case COLLIDER_NAME.ENERGY_BALL:\n                    scriptSkillCollider = this.node.getComponent(EnergyBall) as EnergyBall;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        poolManager.instance.putNode(this.node);\n                    }\n                    break;\n                case COLLIDER_NAME.DISPERSION:\n                    scriptSkillCollider = this.node.getComponent(Dispersion) as Dispersion;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        scriptSkillCollider.hide();\n                    }\n                    break;\n                case COLLIDER_NAME.TORNADO:\n                    scriptSkillCollider = this.node.parent?.getComponent(Tornado) as Tornado;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        poolManager.instance.putNode(this.node.parent as Node);\n                    }\n                    break;\n                case COLLIDER_NAME.DISPERSION_SURROUND:\n                    scriptSkillCollider = this.node.getComponent(DispersionSurround) as DispersionSurround;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        scriptSkillCollider.hide();\n                    }\n                    break;\n            }   \n        } else if (otherCollider.getGroup() == constant.PHY_GROUP.PLAYER  && GameManager.ndPlayer) {\n            let scriptSkillCollider: any = null;\n\n            switch (this.colliderName) {\n                case COLLIDER_NAME.ENERGY_BALL:\n                    poolManager.instance.putNode(this.node);\n\n                    scriptSkillCollider = this.node.getComponent(EnergyBall) as EnergyBall;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.FIRE_BALL:\n                    //不在这里回收节点.在fireBall里面会回收\n                    scriptSkillCollider = this.node.parent?.getComponent(FireBall) as FireBall;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.DISPERSION:\n                    //注意这里不回收节点，只回收父节点\n                    scriptSkillCollider = this.node.getComponent(Dispersion) as Dispersion;\n                    scriptSkillCollider.hide();\n\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.TORNADO:\n                    scriptSkillCollider = this.node.parent?.getComponent(Tornado) as Tornado;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.FIRE_BALL_BIG:\n                    scriptSkillCollider = this.node.parent?.getComponent(FireBallBig) as FireBallBig;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.DISPERSION_SURROUND:\n                    //注意这里不回收，只回收父节点\n                    scriptSkillCollider = this.node.getComponent(DispersionSurround) as DispersionSurround;\n                    scriptSkillCollider.hide();\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.LASER:\n                    scriptSkillCollider = this.node.parent?.getComponent(Laser) as Laser;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n            }\n        }\n    }\n    \n    private _hitPlayer (baseInfo: any) {\n        if (!baseInfo) {\n            console.warn(\"###找不到技能来源敌人\", this.colliderName);\n            return;\n        }\n        console.log(\"###技能碰到玩家了\", this.colliderName);\n        GameManager.scriptPlayer.reduceBlood(baseInfo);\n    }\n\n    /**\n     * 在尖刺路范围,\n     */\n    private _onTriggerStayCb () {\n        this._isOnJetFires = true;\n    }\n\n    /**\n     * 离开尖刺路\n     */\n    private _onTriggerExitCb () {\n        this._isOnJetFires = false;\n    }\n\n    update (deltaTime: number) {\n        if (GameManager.isGameOver || !GameManager.ndPlayer || !this.node.parent) {\n            return;    \n        }\n\n        //检测是否在龙焰（持续性技能里面），每隔0.5秒时间扣减一定伤害\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES && this._isOnJetFires) {\n            this._checkInterval += deltaTime;\n            if (this._checkInterval >= 0.5) {\n                this._checkInterval = 0;\n\n                let scriptSkillCollider = this.node.parent.getComponent(JetFires) as JetFires;\n                this._hitPlayer(scriptSkillCollider.baseInfo);\n            }\n        }\n    }\n}\n\n"]}