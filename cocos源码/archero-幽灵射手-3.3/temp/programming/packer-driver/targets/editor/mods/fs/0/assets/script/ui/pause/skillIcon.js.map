{"version":3,"sources":["file:///Users/ykq/Downloads/archero/assets/script/ui/pause/skillIcon.ts"],"names":["_decorator","Component","Node","ButtonComponent","SpriteComponent","constant","clientEvent","resourceUtil","AudioManager","ccclass","property","SkillIcon","onEnable","on","EVENT_TYPE","HIDE_SKILL_ICON_SELECTED","_hideSelected","onDisable","off","start","init","idx","itemInfo","callback","_itemInfo","_callback","_isSelected","_showSelected","btnCom","transition","Transition","SCALE","NONE","setSpriteFrame","icon","spIcon","err","onItemClick","instance","playSound","SOUND","CLICK","dispatchEvent","ndBg","active"],"mappings":"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","sourcesContent":["import { constant } from './../../framework/constant';\n\nimport { _decorator, Component, Node, ButtonComponent, Button, SpriteComponent } from 'cc';\nimport { clientEvent } from '../../framework/clientEvent';\nimport { resourceUtil } from '../../framework/resourceUtil';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SkillIcon')\nexport class SkillIcon extends Component {\n    @property(ButtonComponent)\n    public btnCom: ButtonComponent = null!;\n\n    @property(SpriteComponent)\n    public spIcon: SpriteComponent = null!;\n\n    @property(Node)\n    public ndBg: Node = null!;\n\n    private _callback: Function = null!;\n    private _itemInfo: any = null!;\n    private _isSelected: boolean = false;\n\n    onEnable () {\n        clientEvent.on(constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED, this._hideSelected, this);\n    }\n\n    onDisable () {\n        clientEvent.off(constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED, this._hideSelected, this);\n    }\n\n    start () {\n        // [3]\n    }\n\n    public init (idx: number, itemInfo: any, callback?: Function) {\n        this._itemInfo = itemInfo;\n        this._callback = callback!;\n        this._isSelected = false;\n\n        if (idx === 0 && this._callback) {\n            this._showSelected();\n            this._callback(this._itemInfo);\n        } else {\n            this._hideSelected();\n        }\n\n        if (callback) {\n            this.btnCom.transition = ButtonComponent.Transition.SCALE;\n        } else {\n            this.btnCom.transition = ButtonComponent.Transition.NONE;\n        }\n\n        resourceUtil.setSpriteFrame(`texture/skillIcon/${itemInfo.icon}`, this.spIcon, (err: any)=>{});\n    }\n\n    public onItemClick () {\n        AudioManager.instance.playSound(constant.SOUND.CLICK);\n\n        if (!this._isSelected && this._callback) {\n            clientEvent.dispatchEvent(constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED);\n            this._callback(this._itemInfo);\n            this._showSelected();\n        }\n    }\n\n    private _showSelected () {\n        this._isSelected = true;\n        this.ndBg.active = true;\n    }\n\n    private _hideSelected () {\n        this._isSelected = false;\n        this.ndBg.active = false;\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}